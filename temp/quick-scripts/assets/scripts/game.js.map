{"version":3,"sources":["game.js"],"names":["CreateHelper","require","CacheObjects","Game","cc","Class","extends","Component","properties","LevelsPrefab","default","type","Prefab","BulletPrefab","BingoBulletPrefab","FailAlertPrefab","LimitNumPrefab","StartTipsPrefab","SuccessAlertPrefab","TimeLablePrefab","start","InitConfig","LevelArray","LevelInfo","GameStart","InitLevelUi","level","length","log","node","removeAllChildren","IsSendBullet","IsCanTap","IsInit","ChangeUpdateTime","Math","random","UpdateTime","timer","unschedule","LevelPrefab","LevelUi","instantiate","circle","find","time_bg","limit_bg","LimitNum","TimeLabel","bulletNode","x","y","addChild","OffsetAngle","RoteSpeed","LimitTime","Time","waitnum","TagetNum","TrunAngle","CurLimitNum","UpdateLimitNum","Bullet","CreateBullet","StartTips","StartAnimationCom","getComponent","Animation","AnimationEnd","active","isPause","isOver","UpdateTimer","bind","time","Label","string","GameOver","schedule","num","GameContinue","Name","RealPath","getRealPath","Sp","Sprite","changeSpriteFrameWithServerUrl","CheckCollision","CreateBingoBullet","BingoBullet","PosX","sin","degreesToRadians","PosY","cos","rotation","IsPause","IsOver","TapHandle","GamePause","resetLevel","self","SuccessAlert","NextBtn","setNodeClickEvent","isCanTap","FailAlert","ResetBtn","MoveAction","moveTo","p","easing","easeSineOut","runAction","ChangeRandomDir","update","dt","module","exports"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar CreateHelper = require(\"CreatorHelper.js\");\r\nvar CacheObjects = require(\"CacheObject.js\")\r\nvar Game = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        LevelsPrefab: {\r\n            default: [],\r\n            type: cc.Prefab\r\n        }, //关卡表现Prefab\r\n        BulletPrefab: cc.Prefab,\r\n        BingoBulletPrefab: cc.Prefab,\r\n        FailAlertPrefab: cc.Prefab,\r\n        LimitNumPrefab: cc.Prefab,\r\n        StartTipsPrefab: cc.Prefab,\r\n        SuccessAlertPrefab: cc.Prefab,\r\n        TimeLablePrefab:cc.Prefab,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {\r\n        \r\n    // },\r\n    start() {\r\n        this.InitConfig();\r\n    },\r\n    //初始化相关关卡数据\r\n    InitConfig() {\r\n        this.LevelArray = CacheObjects.LevelInfo;\r\n        CacheObjects.Game = this;\r\n        this.GameStart()\r\n    },\r\n    InitLevelUi(level) {\r\n        if (level > this.length) {\r\n            cc.log(\"全部通关啦\")\r\n            return\r\n        }\r\n        if (this.node){\r\n            this.node.removeAllChildren(true);\r\n        }\r\n        this.IsSendBullet = false;\r\n        this.IsCanTap = false;\r\n        this.IsInit = false;\r\n        this.ChangeUpdateTime = Math.random(50,100)\r\n        this.UpdateTime = 0;//用于基于突然转向\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        this.level = level;\r\n        var level = level - 1;\r\n        var LevelArray = this.LevelArray[level]\r\n        var LevelPrefab = this.LevelsPrefab[level]\r\n        var LevelUi = cc.instantiate(LevelPrefab);\r\n        this.circle = cc.find(\"circle\", LevelUi); \r\n        this.time_bg = cc.find(\"time_bg\", LevelUi);\r\n        this.limit_bg = cc.find(\"limit_bg\",LevelUi);\r\n        this.LimitNum = cc.instantiate(this.LimitNumPrefab)\r\n        this.TimeLabel = cc.instantiate(this.TimeLablePrefab)\r\n        this.bulletNode =  cc.find(\"bulletNode\",LevelUi);\r\n        this.TimeLabel.x = -357\r\n        this.TimeLabel.y = 455\r\n        if (LevelUi) {\r\n            this.LevelUi = LevelUi\r\n            this.node.addChild(LevelUi);\r\n        }\r\n        LevelUi.addChild(this.TimeLabel)\r\n        LevelUi.addChild(this.LimitNum)\r\n        // this.circle.zIndex = 2\r\n        this.OffsetAngle = LevelArray.RoteSpeed\r\n        this.LimitTime = LevelArray.Time\r\n        this.waitnum = LevelArray.TagetNum\r\n        this.TrunAngle = 0\r\n        this.CurLimitNum = 0\r\n        this.UpdateLimitNum(0)\r\n        this.Bullet = this.CreateBullet()\r\n        this.StartTips = cc.instantiate(this.StartTipsPrefab);\r\n        this.node.addChild(this.StartTips,99)\r\n        var StartAnimationCom = this.StartTips.getComponent(cc.Animation)\r\n        StartAnimationCom.AnimationEnd = function (){\r\n            this.StartTips.active = false\r\n            this.IsCanTap = true;\r\n            this.IsInit = true;\r\n            this.isPause = false;\r\n            this.isOver = false;\r\n            this.UpdateTimer(this.LimitTime)\r\n        }.bind(this)\r\n    },\r\n    //更新倒计时的\r\n    UpdateTimer(time){\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n\r\n        //超时tick\r\n        this.TimeLabel.getComponent(cc.Label).string = time;\r\n        this.timer = function () {\r\n            time -= 1;\r\n            this.TimeLabel.getComponent(cc.Label).string = time;\r\n            if (time <= 0){\r\n                if (this.timer) {\r\n                    this.unschedule(this.timer)\r\n                }\r\n                cc.log(\"时间到了\")\r\n                this.GameOver()\r\n            }\r\n        }.bind(this);\r\n        this.schedule(this.timer, 1, this.LimitTime-1, 0);\r\n    },\r\n    //更新当前插中数字的\r\n    UpdateLimitNum(num){\r\n        if (num >= this.waitnum){\r\n            this.GameContinue()\r\n            return\r\n        }\r\n        if (this.LimitNum)\r\n        {\r\n            var Name = \"resources/limit_num/\"+num+\".png\"\r\n            var RealPath = CreateHelper.getRealPath(Name)\r\n            var Sp = this.LimitNum.getComponent(cc.Sprite)\r\n            CreateHelper.changeSpriteFrameWithServerUrl(Sp, RealPath)\r\n        }\r\n    },\r\n    //创建子弹\r\n    CreateBullet() {\r\n        var Bullet = cc.instantiate(this.BulletPrefab)\r\n        this.node.addChild(Bullet);\r\n        return Bullet\r\n    },\r\n    //检测碰撞跟随转\r\n    CheckCollision(){\r\n        this.Bullet.active = false;\r\n        this.CurLimitNum += 1;\r\n        this.IsSendBullet = false\r\n        this.UpdateLimitNum(this.CurLimitNum)\r\n        cc.log(\"CheckoutCollsion\",this.Bullet.x,this.Bullet.y,this.TrunAngle,this.CurLimitNum)\r\n        this.CreateBingoBullet()\r\n        this.Bullet = this.CreateBullet()\r\n    },\r\n    CreateBingoBullet() {\r\n        var BingoBullet = cc.instantiate(this.BingoBulletPrefab)\r\n        this.bulletNode.addChild(BingoBullet,1);\r\n        var PosX = Math.sin(cc.degreesToRadians(180-this.TrunAngle))*135;\r\n        var PosY = Math.cos(cc.degreesToRadians(180-this.TrunAngle))*135;\r\n        BingoBullet.x = PosX;\r\n        BingoBullet.y = PosY;\r\n        BingoBullet.rotation = 360-this.TrunAngle\r\n    },\r\n    //游戏开始\r\n    GameStart() {\r\n        this.level = 1; //游戏当前关卡\r\n        this.IsPause = false; //游戏当前事发后处于暂停状态,可通过gamePause方法暂停\r\n        this.length = this.LevelsPrefab.length;\r\n        this.IsCanTap = true;\r\n        this.IsOver = false;\r\n        this.IsInit = false;\r\n        this.TapHandle()//设置触摸\r\n        this.InitLevelUi(this.level);\r\n    },\r\n    GamePause() {\r\n        this.IsCanTap = false;\r\n        this.IsPause = true;\r\n    },\r\n    GameContinue(resetLevel) {\r\n        var self = this;\r\n        self.IsPause = false;\r\n        self.IsCanTap = true;\r\n        if (this.IsOver || resetLevel) {\r\n            this.IsOver = false;\r\n        }\r\n        self.SuccessAlert = cc.instantiate(self.SuccessAlertPrefab)\r\n        self.node.addChild(self.SuccessAlert);\r\n        self.SuccessAlert.active = true\r\n        self.NextBtn = cc.find(\"next_btn\", self.SuccessAlert)\r\n        CreateHelper.setNodeClickEvent(self.NextBtn, function () {\r\n            self.level += 1;\r\n            cc.log(\"开始下一关\",self.level)\r\n            self.InitLevelUi(self.level)\r\n          })\r\n\r\n    },\r\n    GameOver() {\r\n        var self = this;\r\n        self.isOver = true;\r\n        self.isCanTap = false;\r\n        self.FailAlert = cc.instantiate(self.FailAlertPrefab)\r\n        self.node.addChild(self.FailAlert);\r\n        self.FailAlert.active = true\r\n        self.ResetBtn = cc.find(\"next_btn\", self.FailAlert)\r\n        CreateHelper.setNodeClickEvent(self.ResetBtn, function () {\r\n            self.FailAlert.active = false\r\n            self.InitLevelUi(1)\r\n          })\r\n    },\r\n    TapHandle(){\r\n        var self = this\r\n        if (self.node) {\r\n            CreateHelper.setNodeClickEvent(self.node, function () {\r\n                if (self.IsCanTap && !self.isPause) {\r\n                    self.IsSendBullet = true\r\n                    self.isCanTap = false\r\n                    self.Bullet.active = true\r\n                    var MoveAction = cc.moveTo(0.5,cc.p(self.bulletNode.x,self.bulletNode.y)).easing(cc.easeSineOut()); \r\n                    self.Bullet.runAction(MoveAction)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //旋转的过程中的一些特殊操作\r\n    ChangeRandomDir(){\r\n    },\r\n    //更新位置\r\n    update(dt) {\r\n        if (!this.isPause) {\r\n            if (!this.isOver){\r\n                if (this.IsInit){\r\n                    cc.log(\"update\",dt,this.OffsetAngle,dt*this.OffsetAngle)\r\n                    this.TrunAngle =  this.TrunAngle  + dt*this.OffsetAngle*1000 //每秒转动\r\n                    this.circle.rotation = this.TrunAngle;\r\n                    this.bulletNode.rotation = this.TrunAngle;\r\n                }\r\n            }\r\n        }\r\n    },\r\n});\r\nmodule.exports = Game;"]}