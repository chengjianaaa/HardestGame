{"version":3,"sources":["game.js"],"names":["CreateHelper","require","CacheObjects","Game","cc","Class","extends","Component","properties","LevelsPrefab","default","type","Prefab","BulletPrefab","BingoBulletPrefab","FailAlertPrefab","LimitNumPrefab","StartTipsPrefab","SuccessAlertPrefab","TimeLablePrefab","onLoad","start","InitConfig","LevelArray","Level","IsPause","RotationCircles","BulletCircles","RotationSpeed","LevelSpaceTime","IsCanTap","IsOver","length","IsInit","GameStart","InitLevelUi","level","log","node","removeAllChildren","IsSendBullet","timer","unschedule","LevelPrefab","LevelUi","instantiate","circle","find","time_bg","limit_bg","LimitNum","TimeLabel","bulletNode","x","y","addChild","zIndex","OffsetAngle","LimitTime","waitnum","TrunAngle","CurLimitNum","UpdateLimitNum","Bullet","CreateBullet","StartTips","StartAnimationCom","getComponent","Animation","AnimationEnd","active","UpdateTimer","bind","time","Label","string","isOver","GameOver","schedule","num","Name","RealPath","getRealPath","Sp","Sprite","changeSpriteFrameWithServerUrl","CheckCollision","self","CreateBingoBullet","BingoBullet","push","Math","sin","PI","cos","resetPosition","TapHandle","GamePause","GameContinue","resetLevel","SuccessAlert","NextBtn","setNodeClickEvent","isCanTap","FailAlert","ResetBtn","isPause","update","dt","rotation","module","exports"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar CreateHelper = require(\"CreatorHelper.js\");\r\nvar CacheObjects = require(\"CacheObject.js\")\r\nvar Game = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        LevelsPrefab: {\r\n            default: [],\r\n            type: cc.Prefab\r\n        }, //关卡表现Prefab\r\n        BulletPrefab: cc.Prefab,\r\n        BingoBulletPrefab: cc.Prefab,\r\n        FailAlertPrefab: cc.Prefab,\r\n        LimitNumPrefab: cc.Prefab,\r\n        StartTipsPrefab: cc.Prefab,\r\n        SuccessAlertPrefab: cc.Prefab,\r\n        TimeLablePrefab:cc.Prefab,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        CacheObjects.Game = this;\r\n    },\r\n    start() {\r\n\r\n        this.InitConfig();\r\n    },\r\n    //初始化相关关卡数据\r\n    InitConfig(LevelArray) {\r\n        //初始化关卡数据\r\n        if (!LevelArray) {\r\n            LevelArray = [\r\n                [6, 10,1.11],\r\n                [8, 45,2.22],\r\n                [9, 50,3.33],\r\n                [10,55,4.44],\r\n                [11,60,5.55],\r\n         \r\n            ];\r\n        }\r\n        this.LevelArray = LevelArray;\r\n        this.Level = 1; //游戏当前关卡\r\n        this.IsPause = false; //游戏当前事发后处于暂停状态,可通过gamePause方法暂停\r\n        this.RotationCircles = [];\r\n        this.BulletCircles = [];\r\n        this.RotationSpeed = 0.03;\r\n        this.LevelSpaceTime = 1;\r\n        this.IsCanTap = true;\r\n        this.IsOver = true;\r\n        this.length = this.LevelsPrefab.length;\r\n        this.IsInit = false;\r\n        this.GameStart()\r\n    },\r\n    InitLevelUi(level) {\r\n        if (level > this.length) {\r\n            cc.log(\"全部通关啦\")\r\n            return\r\n        }\r\n        if (this.node){\r\n            this.node.removeAllChildren(true);\r\n        }\r\n        this.IsSendBullet = false;\r\n        this.IsCanTap = false;\r\n        this.IsInit = false;\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        this.level = level;\r\n        var level = level - 1;\r\n        var LevelArray = this.LevelArray[level]\r\n        var LevelPrefab = this.LevelsPrefab[level]\r\n        var LevelUi = cc.instantiate(LevelPrefab);\r\n        this.circle = cc.find(\"circle\", LevelUi); \r\n        this.time_bg = cc.find(\"time_bg\", LevelUi);\r\n        this.limit_bg = cc.find(\"limit_bg\",LevelUi);\r\n        this.LimitNum = cc.instantiate(this.LimitNumPrefab)\r\n        this.TimeLabel = cc.instantiate(this.TimeLablePrefab)\r\n        this.bulletNode =  cc.find(\"bulletNode\",LevelUi);\r\n        this.TimeLabel.x = -357\r\n        this.TimeLabel.y = 455\r\n        if (LevelUi) {\r\n            this.LevelUi = LevelUi\r\n            this.node.addChild(LevelUi);\r\n        }\r\n        LevelUi.addChild(this.TimeLabel)\r\n        LevelUi.addChild(this.LimitNum)\r\n        this.circle.zIndex = 2\r\n        this.OffsetAngle = LevelArray[2]\r\n        this.LimitTime = LevelArray[1]\r\n        this.waitnum = LevelArray[0]\r\n        this.TrunAngle = 0\r\n        this.CurLimitNum = 0\r\n        this.UpdateLimitNum(0)\r\n        this.Bullet = this.CreateBullet()\r\n        this.StartTips = cc.instantiate(this.StartTipsPrefab);\r\n        this.node.addChild(this.StartTips,99)\r\n        var StartAnimationCom = this.StartTips.getComponent(cc.Animation)\r\n        StartAnimationCom.AnimationEnd = function (){\r\n            this.StartTips.active = false\r\n            this.IsCanTap = true;\r\n            this.IsInit = true\r\n            this.UpdateTimer(this.LimitTime)\r\n        }.bind(this)\r\n    },\r\n    //更新倒计时的\r\n    UpdateTimer(time){\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n\r\n        //超时tick\r\n        this.TimeLabel.getComponent(cc.Label).string = time;\r\n        this.timer = function () {\r\n            time -= 1;\r\n            this.TimeLabel.getComponent(cc.Label).string = time;\r\n            if (time <= 0){\r\n                this.isOver = true;\r\n                if (this.timer) {\r\n                    this.unschedule(this.timer)\r\n                }\r\n                cc.log(\"时间到了\")\r\n                this.GameOver()\r\n            }\r\n        }.bind(this);\r\n        this.schedule(this.timer, 1, this.LimitTime-1, 0);\r\n    },\r\n    //更新当前插中数字的\r\n    UpdateLimitNum(num){\r\n        if (this.LimitNum){\r\n            var Name = \"resources/limit_num/\"+num+\".png\"\r\n            var RealPath = CreateHelper.getRealPath(Name)\r\n            var Sp = this.LimitNum.getComponent(cc.Sprite)\r\n            CreateHelper.changeSpriteFrameWithServerUrl(Sp, RealPath)\r\n        }\r\n    },\r\n    //创建子弹\r\n    CreateBullet() {\r\n        var Bullet = cc.instantiate(this.BulletPrefab)\r\n        this.node.addChild(Bullet);\r\n        return Bullet\r\n    },\r\n    //检测碰撞跟随转\r\n    CheckCollision(){\r\n        var self = this\r\n        self.Bullet.active = false;\r\n        self.CurLimitNum += 1;\r\n        self.IsSendBullet = false\r\n        self.UpdateLimitNum(self.CurLimitNum)\r\n        cc.log(\"CheckoutCollsion\",self.Bullet.x,self.Bullet.y,self.TrunAngle,self.CurLimitNum)\r\n        this.CreateBingoBullet()\r\n        self.Bullet = this.CreateBullet()\r\n    },\r\n    CreateBingoBullet() {\r\n        var BingoBullet = cc.instantiate(this.BingoBulletPrefab)\r\n        this.RotationCircles.push(BingoBullet)\r\n        var x = Math.sin(Math.PI / 180 * this.TrunAngle) * 200\r\n        var y = Math.cos(Math.PI / 180 * this.TrunAngle + 180) * 200\r\n        cc.log(\"CreateBingoBullet\",x,y)\r\n        BingoBullet.x = 0;\r\n        BingoBullet.y = y\r\n        this.bulletNode.addChild(BingoBullet,1);\r\n    },\r\n    resetPosition() {\r\n    },\r\n    //游戏开始\r\n    GameStart() {\r\n        this.level = 1;\r\n        this.IsPause = false;\r\n        this.IsOver = false;\r\n        this.IsCanTap = false;\r\n        this.TapHandle()//设置触摸\r\n        this.InitLevelUi(this.level);\r\n    },\r\n    GamePause() {\r\n        this.IsCanTap = false;\r\n        this.IsPause = true;\r\n    },\r\n    GameContinue(resetLevel) {\r\n        var self = this;\r\n        self.IsPause = false;\r\n        self.IsCanTap = true;\r\n        if (this.IsOver || resetLevel) {\r\n            this.IsOver = false;\r\n        }\r\n        self.SuccessAlert = cc.instantiate(self.SuccessAlertPrefab)\r\n        self.node.addChild(self.SuccessAlert);\r\n        self.SuccessAlert.active = true\r\n        self.NextBtn = cc.find(\"next_btn\", self.SuccessAlert)\r\n        CreateHelper.setNodeClickEvent(self.NextBtn, function () {\r\n            self.level += 1;\r\n            cc.log(\"开始下一关\",self.level)\r\n            self.InitLevelUi(self.level)\r\n          })\r\n\r\n    },\r\n    GameOver() {\r\n        var self = this;\r\n        self.isOver = true;\r\n        self.isCanTap = false;\r\n        self.FailAlert = cc.instantiate(self.FailAlertPrefab)\r\n        self.node.addChild(self.FailAlert);\r\n        self.FailAlert.active = true\r\n        self.ResetBtn = cc.find(\"next_btn\", self.FailAlert)\r\n        CreateHelper.setNodeClickEvent(self.ResetBtn, function () {\r\n            self.FailAlert.active = false\r\n            self.InitLevelUi(1)\r\n          })\r\n    },\r\n    TapHandle(){\r\n        var self = this\r\n        if (self.node) {\r\n            CreateHelper.setNodeClickEvent(self.node, function () {\r\n                cc.log(\"======>\",self.isPause,self.IsCanTap,self.IsCanTap && !self.isPause)\r\n                if (self.IsCanTap && !self.isPause && !self.isOver) {\r\n                    self.IsSendBullet = true\r\n                    self.isCanTap = false\r\n                }\r\n            })\r\n        }\r\n    },\r\n    //更新位置\r\n    update(dt) {\r\n        if (!this.isPause && !this.isOver && this.IsInit) {\r\n            this.TrunAngle += this.OffsetAngle\r\n            this.circle.rotation = this.TrunAngle;\r\n            this.bulletNode.rotation = this.TrunAngle;\r\n            if (this.TrunAngle >= 360) this.TrunAngle = 0;\r\n        }\r\n        if (this.Bullet && this.IsSendBullet) {\r\n            this.Bullet.y += 10;\r\n        }\r\n        // var lens = this.rotationCircles.length;\r\n        // for(i = 0; i < lens; i++){\r\n        //     //this.rotationCircles[i].update(this.rotationSpeed);\r\n        // }\r\n    },\r\n});\r\nmodule.exports = Game;"]}