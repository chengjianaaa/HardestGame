{"version":3,"sources":["game.js"],"names":["CacheObjects","require","CreatorHelper","UnitTools","cc","Class","extends","Component","properties","LevelsPrefab","default","type","Prefab","BulletPrefab","BingoBulletPrefab","FailAlertPrefab","LimitNumPrefab","StartTipsPrefab","SuccessAlertPrefab","TimeLablePrefab","TopAd","Node","BottomAd","BulletAudio","AudioClip","TimeAudio","BingoAudio","BgAudio","SuccessAudio","FailAudio","start","InitConfig","LevelArray","LevelInfo","GameObject","GameStart","InitLevelUi","level","length","log","node","removeAllChildren","BgCurrentAudio","audioEngine","play","IsSendBullet","IsCanTap","IsInit","timer","unschedule","LevelPrefab","LevelUi","instantiate","ChangeUpdateTime","ChangeTime","DirTime","undefined","SpeedTime","UpdateTime","circle","find","time_bg","limit_bg","LimitNum","TimeLabel","bulletNode","x","y","addChild","OffsetAngle","RoteSpeed","LimitTime","Time","Waitnum","TagetNum","IsReturn","TrunAngle","CurLimitNum","UpdateLimitNum","Bullet","CreateBullet","StartTips","StartAnimationCom","getComponent","Animation","AnimationEnd","active","isPause","isOver","UpdateTimer","bind","time","Label","string","TimeCurrentAudio","GameOver","schedule","num","Name","RealPath","getRealPath","Sp","Sprite","changeSpriteFrameWithServerUrl","GameContinue","CheckCollision","stop","BulletCurrentAudio","CreateBingoBullet","BingoCurrentAudio","BingoBullet","a","Math","PI","b","PosX","sin","PosY","cos","rotation","ChangeTopAndBottomAdSpriteFrame","TopUrl","BottomUrl","sp","changeSpriteFrameWithServerUrlForWeb","IsPause","IsOver","IsTryGame","TapHandle","GamePause","self","SuccessCurrentAudio","SuccessAlert","NextBtn","setNodeClickEvent","isCanTap","FailAlert","FailAudioCurrentAudio","ResetBtn","MoveAction","moveTo","p","easing","easeSineOut","runAction","ChangeRandomDir","random","update","dt"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\resources\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\nvar CacheObjects = require('global')\r\nvar CreatorHelper = require(\"CreatorHelper\")\r\nvar UnitTools = require(\"UnitTools\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        LevelsPrefab: {\r\n            default: [],\r\n            type: cc.Prefab\r\n        }, //关卡表现Prefab\r\n        BulletPrefab: cc.Prefab,\r\n        BingoBulletPrefab: cc.Prefab,\r\n        FailAlertPrefab: cc.Prefab,\r\n        LimitNumPrefab: cc.Prefab,\r\n        StartTipsPrefab: cc.Prefab,\r\n        SuccessAlertPrefab: cc.Prefab,\r\n        TimeLablePrefab:cc.Prefab,\r\n        TopAd:cc.Node,\r\n        BottomAd:cc.Node,\r\n        BulletAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n      \r\n        TimeAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        BingoAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        BgAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        SuccessAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n        FailAudio:{\r\n            default:null,\r\n            type:cc.AudioClip\r\n        },\r\n     \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {\r\n        \r\n    // },\r\n    start() {\r\n        this.InitConfig();\r\n    },\r\n    // //初始化相关关卡数据\r\n    InitConfig() {\r\n        this.LevelArray = CacheObjects.LevelInfo\r\n        CacheObjects.GameObject = this;\r\n        this.UnitTools = new UnitTools()\r\n        this.GameStart()\r\n    },\r\n    InitLevelUi(level) {\r\n        if (level > this.length) {\r\n            cc.log(\"全部通关啦\")\r\n            return\r\n        }\r\n        if (this.node){\r\n            this.node.removeAllChildren(true);\r\n        }\r\n        this.BgCurrentAudio = cc.audioEngine.play(this.BgAudio, true, 0.2);\r\n        this.IsSendBullet = false;\r\n        this.IsCanTap = false;\r\n        this.IsInit = false;\r\n    \r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        this.level = level;\r\n        var level = level - 1;\r\n        var LevelArray = this.LevelArray[level]\r\n        var LevelPrefab = this.LevelsPrefab[level]\r\n        var LevelUi = cc.instantiate(LevelPrefab);\r\n        this.ChangeUpdateTime = LevelArray.ChangeTime //UnitTools.random(100,300) //经过多少转向\r\n        this.DirTime = undefined //突然转向\r\n        this.SpeedTime = undefined  //突然变速时间\r\n        this.UpdateTime = 0;//用于基于突然转向\r\n        this.circle = cc.find(\"circle\", LevelUi); \r\n        this.time_bg = cc.find(\"time_bg\", LevelUi);\r\n        this.limit_bg = cc.find(\"limit_bg\",LevelUi);\r\n        this.LimitNum = cc.instantiate(this.LimitNumPrefab)\r\n        this.TimeLabel = cc.instantiate(this.TimeLablePrefab)\r\n        this.bulletNode =  cc.find(\"bulletNode\",LevelUi);\r\n        this.TimeLabel.x = -357\r\n        this.TimeLabel.y = 455\r\n        if (LevelUi) {\r\n            this.LevelUi = LevelUi\r\n            this.node.addChild(LevelUi);\r\n        }\r\n        LevelUi.addChild(this.TimeLabel)\r\n        LevelUi.addChild(this.LimitNum)\r\n        this.OffsetAngle = LevelArray.RoteSpeed\r\n        this.LimitTime = LevelArray.Time\r\n        this.Waitnum = LevelArray.TagetNum\r\n        this.IsReturn = LevelArray.IsReturn\r\n        this.TrunAngle = 0\r\n        this.CurLimitNum = 0\r\n        this.UpdateLimitNum(0)\r\n        this.Bullet = this.CreateBullet()\r\n        this.StartTips = cc.instantiate(this.StartTipsPrefab);\r\n        this.node.addChild(this.StartTips,99)\r\n        var StartAnimationCom = this.StartTips.getComponent(cc.Animation)\r\n        StartAnimationCom.AnimationEnd = function (){\r\n            this.StartTips.active = false\r\n            this.IsCanTap = true;\r\n            this.IsInit = true;\r\n            this.isPause = false;\r\n            this.isOver = false;\r\n            this.UpdateTimer(this.LimitTime)\r\n        }.bind(this)\r\n    },\r\n    //更新倒计时的\r\n    UpdateTimer(time){\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n\r\n        //超时tick\r\n        this.TimeLabel.getComponent(cc.Label).string = time;\r\n        this.timer = function () {\r\n            time -= 1;\r\n            this.TimeLabel.getComponent(cc.Label).string = time;\r\n            if (time <= 0){\r\n                if (this.timer) {\r\n                    this.unschedule(this.timer)\r\n                }\r\n                this.TimeCurrentAudio = cc.audioEngine.play(this.TimeAudio, false, 1);\r\n                this.GameOver()\r\n            }\r\n        }.bind(this);\r\n        this.schedule(this.timer, 1, this.LimitTime-1, 0);\r\n    },\r\n    //更新当前插中数字的\r\n    UpdateLimitNum(num){\r\n    \r\n        if (this.LimitNum)\r\n        {\r\n            var Name = \"resources/limit_num/\"+num+\".png\"\r\n            var RealPath = CreatorHelper.getRealPath(Name)\r\n            var Sp = this.LimitNum.getComponent(cc.Sprite)\r\n            CreatorHelper.changeSpriteFrameWithServerUrl(Sp, RealPath)\r\n        }\r\n        if (num >= this.Waitnum){\r\n            this.GameContinue()\r\n            return\r\n        }\r\n    },\r\n    //创建子弹\r\n    CreateBullet() {\r\n        var Bullet = cc.instantiate(this.BulletPrefab)\r\n        this.node.addChild(Bullet);\r\n        return Bullet\r\n    },\r\n    //检测碰撞跟随转\r\n    CheckCollision(){\r\n        cc.audioEngine.stop(this.BulletCurrentAudio);\r\n        this.Bullet.active = false;\r\n        this.CurLimitNum += 1;\r\n        this.IsCanTap = true;\r\n        this.UpdateLimitNum(this.CurLimitNum)\r\n        this.CreateBingoBullet()\r\n        this.Bullet = this.CreateBullet()\r\n    },\r\n    //创建打中的子弹\r\n    CreateBingoBullet() {\r\n        this.BingoCurrentAudio = cc.audioEngine.play(this.BingoAudio, false, 1);\r\n        var BingoBullet = cc.instantiate(this.BingoBulletPrefab)\r\n        this.bulletNode.addChild(BingoBullet,1);\r\n        var a = (180 - this.TrunAngle) * Math.PI / 180 //cc.degreesToRadians(180-this.TrunAngle)\r\n        var b = (180 - this.TrunAngle) * Math.PI / 180\r\n        var PosX = Math.sin(a)*135;\r\n        var PosY = Math.cos(b)*135;\r\n        BingoBullet.x = PosX;\r\n        BingoBullet.y = PosY;\r\n        BingoBullet.rotation = 360-this.TrunAngle\r\n    },\r\n    //上下边栏的图片置换\r\n    ChangeTopAndBottomAdSpriteFrame(TopUrl,BottomUrl){\r\n        var TopUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\r\n        var BottomUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\r\n        \r\n        //CreatorHelper.changeSpriteFrameWithServerUrlForWeb(this.TopAd.getComponent(cc.Sprite), TopUrl)\r\n        var sp = this.TopAd.getComponent(cc.Sprite)\r\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp,TopUrl)\r\n        sp = this.BottomAd.getComponent(cc.Sprite)\r\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp, BottomUrl)\r\n    },\r\n    //游戏开始\r\n    GameStart() {\r\n        this.level = 1; //游戏当前关卡\r\n        this.IsPause = false; //游戏当前事发后处于暂停状态,可通过gamePause方法暂停\r\n        this.length = this.LevelsPrefab.length;\r\n        this.IsCanTap = true;\r\n        this.IsOver = false;\r\n        this.IsInit = false;\r\n        this.IsTryGame = false;//是否试玩\r\n        // //测试网上下载图片\r\n        // this.ChangeTopAndBottomAdSpriteFrame()\r\n        this.TapHandle()//设置触摸\r\n        this.InitLevelUi(this.level);\r\n    },\r\n    GamePause() {\r\n        this.IsCanTap = false;\r\n        this.IsPause = true;\r\n    },\r\n    GameContinue() {\r\n        var self = this;\r\n        self.IsPause = true;\r\n        self.IsCanTap = false;\r\n        self.IsInit = false\r\n        cc.audioEngine.stop(self.BgCurrentAudio)\r\n        self.SuccessCurrentAudio = cc.audioEngine.play(self.SuccessAudio, false, 1);\r\n        if (self.SuccessAlert){\r\n            self.SuccessAlert.removeAllChildren(true);\r\n        }\r\n        self.SuccessAlert = cc.instantiate(self.SuccessAlertPrefab)\r\n        self.node.addChild(self.SuccessAlert);\r\n        self.SuccessAlert.active = true\r\n        self.NextBtn = cc.find(\"next_btn\", self.SuccessAlert)\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        CreatorHelper.setNodeClickEvent(self.NextBtn, function () {\r\n            cc.audioEngine.stop(self.SuccessCurrentAudio)\r\n            self.level += 1;\r\n            self.InitLevelUi(self.level)\r\n          })\r\n\r\n    },\r\n    GameOver() {\r\n        var self = this;\r\n        self.isOver = true;\r\n        self.isCanTap = false;\r\n        if (self.FailAlert){\r\n            self.FailAlert.removeAllChildren(true);\r\n        }\r\n        if (this.timer) {\r\n            this.unschedule(this.timer)\r\n        }\r\n        cc.audioEngine.stop(self.BgCurrentAudio)\r\n        self.FailAudioCurrentAudio = cc.audioEngine.play(self.FailAudio, false, 1);\r\n        self.FailAlert = cc.instantiate(self.FailAlertPrefab)\r\n        self.node.addChild(self.FailAlert);\r\n        self.FailAlert.active = true\r\n        self.ResetBtn = cc.find(\"next_btn\", self.FailAlert)\r\n        CreatorHelper.setNodeClickEvent(self.ResetBtn, function () {\r\n            self.FailAlert.active = false\r\n            cc.audioEngine.stop(self.FailAudioCurrentAudio)\r\n            self.InitLevelUi(1)\r\n          })\r\n    },\r\n    TapHandle(){\r\n        var self = this\r\n        if (self.node) {\r\n            CreatorHelper.setNodeClickEvent(self.node, function () {\r\n                if (self.IsCanTap) {\r\n                    if (!self.isOver) {\r\n                        if (self.IsInit){\r\n                            self.IsCanTap = false\r\n                            self.Bullet.active = true\r\n                            var MoveAction = cc.moveTo(0.5,cc.p(self.bulletNode.x,self.bulletNode.y)).easing(cc.easeSineOut()); \r\n                            self.Bullet.runAction(MoveAction)\r\n                            cc.audioEngine.stop(self.BingoCurrentAudio);\r\n                            self.BulletCurrentAudio = cc.audioEngine.play(self.BulletAudio, false, 1);\r\n                        }\r\n                    }\r\n                \r\n                }\r\n            })\r\n        }\r\n    },\r\n    //旋转的过程中的一些特殊操作\r\n    ChangeRandomDir(){\r\n        //翻转\r\n        if (this.IsReturn) {\r\n            if (this.DirTime == undefined){\r\n                this.DirTime = this.ChangeUpdateTime + this.UnitTools.random(100,300)\r\n            }\r\n            this.UpdateTime+=1\r\n            if (this.UpdateTime >= this.DirTime) {\r\n                this.DirTime = undefined\r\n                this.UpdateTime = 0\r\n                this.OffsetAngle = -this.OffsetAngle\r\n            }\r\n        }\r\n        //突然加速\r\n\r\n    },\r\n    //更新位置\r\n    update(dt) {\r\n        if (!this.isPause) {\r\n            if (!this.isOver){\r\n                if (this.IsInit){\r\n                    this.ChangeRandomDir()\r\n                    this.TrunAngle =  this.TrunAngle + this.OffsetAngle //每帧转动\r\n                    this.circle.rotation = this.TrunAngle;\r\n                    this.bulletNode.rotation = this.TrunAngle;\r\n                }\r\n            }\r\n        }\r\n    },\r\n});"]}