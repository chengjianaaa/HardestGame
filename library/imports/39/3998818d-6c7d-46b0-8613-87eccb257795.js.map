{"version":3,"sources":["../../../../assets/scripts/assets/scripts/game.js"],"names":["CreatorHelper","require","CacheObjects","UintTools","Game","cc","Class","extends","Component","properties","LevelsPrefab","default","type","Prefab","BulletPrefab","BingoBulletPrefab","FailAlertPrefab","LimitNumPrefab","StartTipsPrefab","SuccessAlertPrefab","TimeLablePrefab","TopAd","Node","BottomAd","start","InitConfig","LevelArray","LevelInfo","GameStart","InitLevelUi","level","length","log","node","removeAllChildren","IsSendBullet","IsCanTap","IsInit","ChangeUpdateTime","random","DirTime","undefined","SpeedTime","UpdateTime","timer","unschedule","LevelPrefab","LevelUi","instantiate","circle","find","time_bg","limit_bg","LimitNum","TimeLabel","bulletNode","x","y","addChild","OffsetAngle","RoteSpeed","LimitTime","Time","Waitnum","TagetNum","IsReturn","TrunAngle","CurLimitNum","UpdateLimitNum","Bullet","CreateBullet","StartTips","StartAnimationCom","getComponent","Animation","AnimationEnd","active","isPause","isOver","UpdateTimer","bind","time","Label","string","GameOver","schedule","num","Name","RealPath","getRealPath","Sp","Sprite","changeSpriteFrameWithServerUrl","GameContinue","CheckCollision","CreateBingoBullet","BingoBullet","PosX","Math","sin","degreesToRadians","PosY","cos","rotation","ChangeTopAndBottomAdSpriteFrame","TopUrl","BottomUrl","sp","changeSpriteFrameWithServerUrlForWeb","IsPause","IsOver","TapHandle","GamePause","self","SuccessAlert","NextBtn","setNodeClickEvent","isCanTap","FailAlert","ResetBtn","MoveAction","moveTo","p","easing","easeSineOut","runAction","ChangeRandomDir","update","dt","module","exports"],"mappings":"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","file":"game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar CreatorHelper = require(\"CreatorHelper.js\");\nvar CacheObjects = require(\"CacheObject.js\")\nvar UintTools = require(\"UnitTools.js\")\nvar Game = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        LevelsPrefab: {\n            default: [],\n            type: cc.Prefab\n        }, //关卡表现Prefab\n        BulletPrefab: cc.Prefab,\n        BingoBulletPrefab: cc.Prefab,\n        FailAlertPrefab: cc.Prefab,\n        LimitNumPrefab: cc.Prefab,\n        StartTipsPrefab: cc.Prefab,\n        SuccessAlertPrefab: cc.Prefab,\n        TimeLablePrefab:cc.Prefab,\n        TopAd:cc.Node,\n        BottomAd:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {\n        \n    // },\n    start() {\n        this.InitConfig();\n    },\n    //初始化相关关卡数据\n    InitConfig() {\n        this.LevelArray = CacheObjects.LevelInfo;\n        CacheObjects.Game = this;\n        this.GameStart()\n    },\n    InitLevelUi(level) {\n        if (level > this.length) {\n            cc.log(\"全部通关啦\")\n            return\n        }\n        if (this.node){\n            this.node.removeAllChildren(true);\n        }\n        this.IsSendBullet = false;\n        this.IsCanTap = false;\n        this.IsInit = false;\n        this.ChangeUpdateTime = UintTools.random(100,300) //经过多少转向\n        this.DirTime = undefined //突然转向\n        this.SpeedTime = undefined  //突然变速时间\n        this.UpdateTime = 0;//用于基于突然转向\n        if (this.timer) {\n            this.unschedule(this.timer)\n        }\n        this.level = level;\n        var level = level - 1;\n        var LevelArray = this.LevelArray[level]\n        var LevelPrefab = this.LevelsPrefab[level]\n        var LevelUi = cc.instantiate(LevelPrefab);\n        this.circle = cc.find(\"circle\", LevelUi); \n        this.time_bg = cc.find(\"time_bg\", LevelUi);\n        this.limit_bg = cc.find(\"limit_bg\",LevelUi);\n        this.LimitNum = cc.instantiate(this.LimitNumPrefab)\n        this.TimeLabel = cc.instantiate(this.TimeLablePrefab)\n        this.bulletNode =  cc.find(\"bulletNode\",LevelUi);\n        this.TimeLabel.x = -357\n        this.TimeLabel.y = 455\n        if (LevelUi) {\n            this.LevelUi = LevelUi\n            this.node.addChild(LevelUi);\n        }\n        LevelUi.addChild(this.TimeLabel)\n        LevelUi.addChild(this.LimitNum)\n        this.OffsetAngle = LevelArray.RoteSpeed\n        this.LimitTime = LevelArray.Time\n        this.Waitnum = LevelArray.TagetNum\n        this.IsReturn = LevelArray.IsReturn\n        this.TrunAngle = 0\n        this.CurLimitNum = 0\n        this.UpdateLimitNum(0)\n        this.Bullet = this.CreateBullet()\n        this.StartTips = cc.instantiate(this.StartTipsPrefab);\n        this.node.addChild(this.StartTips,99)\n        var StartAnimationCom = this.StartTips.getComponent(cc.Animation)\n        StartAnimationCom.AnimationEnd = function (){\n            this.StartTips.active = false\n            this.IsCanTap = true;\n            this.IsInit = true;\n            this.isPause = false;\n            this.isOver = false;\n            this.UpdateTimer(this.LimitTime)\n        }.bind(this)\n    },\n    //更新倒计时的\n    UpdateTimer(time){\n        if (this.timer) {\n            this.unschedule(this.timer)\n        }\n\n        //超时tick\n        this.TimeLabel.getComponent(cc.Label).string = time;\n        this.timer = function () {\n            time -= 1;\n            this.TimeLabel.getComponent(cc.Label).string = time;\n            if (time <= 0){\n                if (this.timer) {\n                    this.unschedule(this.timer)\n                }\n                cc.log(\"时间到了\")\n                this.GameOver()\n            }\n        }.bind(this);\n        this.schedule(this.timer, 1, this.LimitTime-1, 0);\n    },\n    //更新当前插中数字的\n    UpdateLimitNum(num){\n    \n        if (this.LimitNum)\n        {\n            var Name = \"resources/limit_num/\"+num+\".png\"\n            var RealPath = CreatorHelper.getRealPath(Name)\n            var Sp = this.LimitNum.getComponent(cc.Sprite)\n            CreatorHelper.changeSpriteFrameWithServerUrl(Sp, RealPath)\n        }\n        if (num >= this.Waitnum){\n            this.GameContinue()\n            return\n        }\n    },\n    //创建子弹\n    CreateBullet() {\n        var Bullet = cc.instantiate(this.BulletPrefab)\n        this.node.addChild(Bullet);\n        return Bullet\n    },\n    //检测碰撞跟随转\n    CheckCollision(){\n        this.Bullet.active = false;\n        this.CurLimitNum += 1;\n        this.IsCanTap = true;\n        this.UpdateLimitNum(this.CurLimitNum)\n        this.CreateBingoBullet()\n        this.Bullet = this.CreateBullet()\n    },\n    //创建打中的子弹\n    CreateBingoBullet() {\n        var BingoBullet = cc.instantiate(this.BingoBulletPrefab)\n        this.bulletNode.addChild(BingoBullet,1);\n        var PosX = Math.sin(cc.degreesToRadians(180-this.TrunAngle))*135;\n        var PosY = Math.cos(cc.degreesToRadians(180-this.TrunAngle))*135;\n        BingoBullet.x = PosX;\n        BingoBullet.y = PosY;\n        BingoBullet.rotation = 360-this.TrunAngle\n    },\n    //上下边栏的图片置换\n    ChangeTopAndBottomAdSpriteFrame(TopUrl,BottomUrl){\n        var TopUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\n        var BottomUrl = \"http://i4.fuimg.com/583278/00e2ef22ec67b9b0.jpg\"\n        \n        //CreatorHelper.changeSpriteFrameWithServerUrlForWeb(this.TopAd.getComponent(cc.Sprite), TopUrl)\n        var sp = this.TopAd.getComponent(cc.Sprite)\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp,TopUrl)\n        sp = this.BottomAd.getComponent(cc.Sprite)\n        CreatorHelper.changeSpriteFrameWithServerUrlForWeb(sp, BottomUrl)\n    },\n    //游戏开始\n    GameStart() {\n        this.level = 1; //游戏当前关卡\n        this.IsPause = false; //游戏当前事发后处于暂停状态,可通过gamePause方法暂停\n        this.length = this.LevelsPrefab.length;\n        this.IsCanTap = true;\n        this.IsOver = false;\n        this.IsInit = false;\n        //测试网上下载图片\n        this.ChangeTopAndBottomAdSpriteFrame()\n        this.TapHandle()//设置触摸\n        this.InitLevelUi(this.level);\n    },\n    GamePause() {\n        this.IsCanTap = false;\n        this.IsPause = true;\n    },\n    GameContinue() {\n        var self = this;\n        self.IsPause = true;\n        self.IsCanTap = false;\n        self.IsInit = false\n        if (self.SuccessAlert){\n            self.SuccessAlert.removeAllChildren(true);\n        }\n        self.SuccessAlert = cc.instantiate(self.SuccessAlertPrefab)\n        self.node.addChild(self.SuccessAlert);\n        self.SuccessAlert.active = true\n        self.NextBtn = cc.find(\"next_btn\", self.SuccessAlert)\n        CreatorHelper.setNodeClickEvent(self.NextBtn, function () {\n            self.level += 1;\n            self.InitLevelUi(self.level)\n          })\n\n    },\n    GameOver() {\n        var self = this;\n        self.isOver = true;\n        self.isCanTap = false;\n        if (self.FailAlert){\n            self.FailAlert.removeAllChildren(true);\n        }\n        self.FailAlert = cc.instantiate(self.FailAlertPrefab)\n        self.node.addChild(self.FailAlert);\n        self.FailAlert.active = true\n        self.ResetBtn = cc.find(\"next_btn\", self.FailAlert)\n        CreatorHelper.setNodeClickEvent(self.ResetBtn, function () {\n            self.FailAlert.active = false\n            self.InitLevelUi(1)\n          })\n    },\n    TapHandle(){\n        var self = this\n        if (self.node) {\n            CreatorHelper.setNodeClickEvent(self.node, function () {\n                if (self.IsCanTap) {\n                    if (!self.isOver) {\n                        if (self.IsInit){\n                            self.IsCanTap = false\n                            self.Bullet.active = true\n                            var MoveAction = cc.moveTo(0.5,cc.p(self.bulletNode.x,self.bulletNode.y)).easing(cc.easeSineOut()); \n                            self.Bullet.runAction(MoveAction)\n                        }\n                    }\n                \n                }\n            })\n        }\n    },\n    //旋转的过程中的一些特殊操作\n    ChangeRandomDir(){\n        //翻转\n        if (this.IsReturn) {\n            if (this.DirTime == undefined){\n                this.DirTime = this.ChangeUpdateTime + UintTools.random(100,300)\n            }\n            this.UpdateTime+=1\n            if (this.UpdateTime >= this.DirTime) {\n                this.DirTime = undefined\n                this.UpdateTime = 0\n                this.OffsetAngle = -this.OffsetAngle\n            }\n        }\n        //突然加速\n\n    },\n    //更新位置\n    update(dt) {\n        if (!this.isPause) {\n            if (!this.isOver){\n                if (this.IsInit){\n                    this.ChangeRandomDir()\n                    this.TrunAngle =  this.TrunAngle + this.OffsetAngle //每帧转动\n                    this.circle.rotation = this.TrunAngle;\n                    this.bulletNode.rotation = this.TrunAngle;\n                }\n            }\n        }\n    },\n});\nmodule.exports = Game;"]}